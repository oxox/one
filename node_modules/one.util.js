/**
 * utility module
 * @module Common
 * @class util
 * @static
 */
module.exports=(function(x,$,win){
	
	x.fs = require('fs-extra');
	x.userName = process.env['USERNAME'];
	x.localdb = win.localStorage||{};
	x.session = win.sessionStorage||{};
	x.appRoot = __dirname.substr(0,__dirname.lastIndexOf('\\')+1);//process.execPath.substr(0,process.execPath.lastIndexOf('\\')+1);

	//package json
	if ( !(x.package=x.session['package']) ) {
		x.package = x.fs.readJsonSync(x.appRoot+'package.json');
		x.session['package'] = JSON.stringify(x.package);
	}else{
		x.package = JSON.parse(x.package);
	};

	x.dataRoot = x.appRoot+"data\\$\\".replace('$',x.package.name);
	x.initFile = x.dataRoot+"app.ini";
	x.$win = $(win);

	return x;

})({},global.$||function(){},global.window||{});